# è‡ªå®šä¹‰å¯åŠ¨å‚æ•°

ç¨‹åºç›®å‰çš„å¯åŠ¨å‚æ•°ï¼Œå¯ä»¥ä»ç¯å¢ƒå˜é‡æˆ–ä»å‘½ä»¤è¡Œå‚æ•°ä¸­è§£æè·å¾—ã€‚

é»˜è®¤æ¨èä½¿ç”¨ä¸€ç§æ–¹æ¡ˆè¿›è¡Œå‚æ•°é…ç½®ï¼Œå¦‚æœä½ æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œéœ€è¦æ··åˆä½¿ç”¨ã€‚

è¯·æ³¨æ„ï¼Œå‘½ä»¤è¡Œå‚æ•°æ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œä¼šè¦†ç›–ç¯å¢ƒå˜é‡ä¸­çš„å‚æ•°ã€‚


## ç¯å¢ƒå˜é‡

```bash
ä¿®æ”¹ç¨‹åºç›‘å¬ç«¯å£          "FLARE_PORT"
é…ç½®ç™»é™†æ¨¡å¼ä¸‹çš„è´¦å·      "FLARE_USER"
é…ç½®ç™»é™†æ¨¡å¼ä¸‹çš„å¯†ç       "FLARE_PASS"
å¯ç”¨æˆ–ç¦ç”¨ç¨‹åºå‘å¯¼        "FLARE_GUIDE"
å¯ç”¨ç¨‹åºåºŸå¼ƒåŠŸèƒ½æç¤º      "FLARE_DEPRECATED_NOTICE"
å¯ç”¨æœåŠ¡ç«¯è¯·æ±‚åˆå¹¶åŠŸèƒ½     "FLARE_MINI_REQUEST"
ç¦ç”¨ç™»é™†æ¨¡å¼             "FLARE_DISABLE_LOGIN"
å¯ç”¨ç¦»çº¿æ¨¡å¼             "FLARE_OFFLINE"
å¯ç”¨åœ¨çº¿ç¼–è¾‘å™¨åŠŸèƒ½        "FLARE_EDITOR"
é¦–é¡µæ˜¯å¦éœ€è¦ç™»é™†å¯è§      "FLARE_VISIBILITY"
```

ç¯å¢ƒå˜é‡ä½¿ç”¨ç¤ºä¾‹ï¼š `FLARE_OFFLINE=0` æˆ– `FLARE_OFFLINE=false`

å®Œå…¨çš„ç¯å¢ƒå˜é‡åˆ—è¡¨ï¼Œå¯ä»¥[å‚è€ƒè¿™é‡Œ](https://github.com/soulteary/flare/blob/main/model/cmd.go)ã€‚


## å‘½ä»¤è¡Œå‚æ•°

```
docker run --rm -it -p 5005:5005 soulteary/flare:0.5.1 flare
æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶configï¼Œåˆ›å»ºé»˜è®¤é…ç½®ã€‚
[22:49:49.562] INFO: Flare - ğŸ‚ Challenge all bookmarking apps and websites directories, Aim to Be a best performance monster.
[11:23:23.622] INFO: ç¨‹åºä¿¡æ¯ï¼š {"GOGS/ARCH":"linux/arm64","commit":"4D2A2143715A30FC1646DE067847322A8C6F91BF","date":"2024-01-06T03:24:10Z","version":"0.5.1"}
[22:49:49.562] INFO: ç¨‹åºæœåŠ¡ç«¯å£ {"port":5005}
[22:49:49.562] INFO: é¡µé¢è¯·æ±‚åˆå¹¶ {"mini_request":false}
[22:49:49.562] INFO: å¯ç”¨ç¦»çº¿æ¨¡å¼ {"offline":false}
[22:49:49.562] INFO: å·²ç¦ç”¨ç™»é™†æ¨¡å¼ï¼Œç”¨æˆ·å¯ç›´æ¥è°ƒæ•´åº”ç”¨è®¾ç½®ã€‚
[22:49:49.563] INFO: åœ¨çº¿ç¼–è¾‘æ¨¡å—å¯ç”¨ï¼Œå¯ä»¥è®¿é—® /editor æ¥è¿›è¡Œæ•°æ®ç¼–è¾‘ã€‚
[22:49:49.563] INFO: å‘å¯¼æ¨¡å—å¯ç”¨ï¼Œå¯ä»¥è®¿é—® /guide æ¥è·å–ç¨‹åºä½¿ç”¨å¸®åŠ©ã€‚
[22:49:49.563] INFO: ç¨‹åºå·²å¯åŠ¨å®Œæ¯• ğŸš€


æ”¯æŒå‘½ä»¤ï¼š
  -p, --port int            æŒ‡å®šç›‘å¬ç«¯å£ (default 5005)
  -g, --guide               å¯ç”¨åº”ç”¨å‘å¯¼ (default true)
  -s, --visibility string   è°ƒæ•´ç½‘ç«™æ•´ä½“å¯è§æ€§ (default "DEFAULT")
  -m, --mini_request        ä½¿ç”¨è¯·æ±‚æœ€å°åŒ–æ¨¡å¼
  -o, --offline             å¯ç”¨ç¦»çº¿æ¨¡å¼
  -l, --disable_login       ç¦ç”¨è´¦å·ç™»é™† (default true)
  -n, --enable_notice       å¯ç”¨åºŸå¼ƒæ—¥å¿—è­¦å‘Š (default true)
  -e, --enable_editor       å¯ç”¨ç¼–è¾‘å™¨ (default true)
  -c, --disable_csp         ç¦ç”¨CSP
  -v, --version             æ˜¾ç¤ºåº”ç”¨ç‰ˆæœ¬å·
  -h, --help                æ˜¾ç¤ºå¸®åŠ©
```

## åŠŸèƒ½è¯´æ˜

### åˆå¹¶èµ„æºè¯·æ±‚

- ç¯å¢ƒå˜é‡ï¼š`FLARE_MINI_REQUEST`
- å‘½ä»¤è¡Œï¼š`mini_request` / `m`

è¿™ä¸ªå‚æ•°çš„ä½œç”¨æ˜¯â€œåˆå¹¶é¡µé¢è¯·æ±‚èµ„æºï¼Œå‡å°‘é¡µé¢èµ„æºè¯·æ±‚æ€»æ•°é‡â€ï¼Œåœ¨ä¸€äº›ä¹¦ç­¾æ•°æ®é‡æå¤§çš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥å¤§å¹…æå‡é¡µé¢æ¸²æŸ“æ€§èƒ½ã€‚

å°ä¼™ä¼´å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µæŒ‰éœ€å¼€å¯ï¼Œæ­¤å‚æ•°é»˜è®¤å…³é—­ã€‚

å¯ç”¨æ–¹æ³•ï¼Œåœ¨ flare å¯åŠ¨å‚æ•°åæ·»åŠ  `-m=1` æˆ–è€…è®¾ç½®ç¯å¢ƒå˜é‡ `FLARE_MINI_REQUEST=1`

### å…ç™»é™†æ¨¡å¼ï¼š`disable_login`

å½“è¿™ä¸ªå‚æ•°å…³é—­ä¹‹åï¼Œç”¨æˆ·éœ€è¦åœ¨ç™»é™†ä¹‹åï¼Œæ‰èƒ½å¤Ÿå¯¹è®¾ç½®é¡µé¢çš„å†…å®¹è¿›è¡Œè°ƒæ•´ï¼Œé€‚åˆ Flare åœ¨å…¬ç½‘ç¯å¢ƒä¸­ä½¿ç”¨çš„å°ä¼™ä¼´ã€‚

æ­¤å‚æ•°é»˜è®¤å¼€å¯ï¼Œæ–¹ä¾¿åœ¨ HomeLab æˆ–æœ¬åœ°ä½¿ç”¨çš„å°ä¼™ä¼´ï¼Œå‡å°‘ä¸å¿…è¦çš„æ“ä½œã€‚

ç¦ç”¨æ–¹æ³•ï¼Œåœ¨ flare å¯åŠ¨å‚æ•°åæ·»åŠ  `--disable_login=0`

### ç¦»çº¿æ¨¡å¼ï¼š`offline`

å½“è¿™ä¸ªå‚æ•°å¼€å¯ä¹‹åï¼Œflare æ‰€æœ‰ä¾èµ–å…¬ç½‘çš„åŠŸèƒ½å°†è¢«åœç”¨ã€‚

ç›®å‰ flare ä»…ä¼šè°ƒç”¨ issue[#4](https://github.com/soulteary/docker-flare/issues/4) ä¸­æåˆ°çš„ `https://wis.qq.com/weather/common` æ¥å£è·å–å¤©æ°”æ•°æ®ï¼Œå’Œ IPIP çš„åœ°ç†ä½ç½®æ¥å£è·å–åœ°ç†ä¿¡æ¯ï¼Œå¼€å¯æ­¤å‚æ•°åï¼Œå¤©æ°”å°†æ— æ³•è·å–ã€‚

æ­¤å‚æ•°é»˜è®¤å…³é—­ï¼Œå¼€å¯æ–¹æ³•ï¼Œåœ¨ flare å¯åŠ¨å‚æ•°åæ·»åŠ ï¼š`--offline=1`

### æŒ‡å®šç«¯å£ï¼š`port`

è¿™ä¸ªå‚æ•°ç”¨äºè‡ªå®šä¹‰æœåŠ¡ç«¯å£ï¼Œä½¿ç”¨ `docker-flare` çš„å°ä¼™ä¼´å¯ä»¥å¿½ç•¥ã€‚

### åŠ¨æ€é“¾æ¥

> [!TIP]
> Since: v0.4.2 - 2023.12.06

æ ¹æ®ç¯å¢ƒï¼Œè¿›è¡ŒåŠ¨æ€é“¾æ¥çš„å±•ç¤ºå’Œåˆ‡æ¢ã€‚

å‡è®¾ flare æœåŠ¡çš„é¦–é¡µåœ°å€ä¸º `https://192.168.0.1:5005/`ï¼Œä»¥ä¸‹å¯ç”¨çš„å„å‚æ•°åŠå…¶å¯¹åº”è§£æç»“æœï¼š

| å‚æ•°å | è§£æç»“æœ |
| --- | --- |
| `host` | `192.168.0.1:5005` |
| `hostname` | `192.168.0.1` |
| `href` | `https://192.168.0.1:5005/` |
| `origin` | `https://192.168.0.1:5005` |
| `pathname` | `/` |
| `port` | `5005` |
| `protocol` | `https:` |

**ç¤ºä¾‹**

å‡è®¾æŸä¹¦ç­¾ç½‘å€é…ç½®ä¸º `https://{hostname}:8888/test` æ—¶:

- å½“ flare æœåŠ¡çš„é¦–é¡µåœ°å€ä¸º `https://192.168.0.1:5005/`ï¼Œå…¶æ˜¾ç¤ºä¸º `https://192.168.0.1:8888/test`ã€‚
- å½“ flare æœåŠ¡çš„é¦–é¡µåœ°å€ä¸º `https://172.17.0.1:5005/`ï¼Œå…¶æ˜¾ç¤ºä¸º `https://172.17.0.1:8888/test`ã€‚
- å½“ flare æœåŠ¡çš„é¦–é¡µåœ°å€ä¸º `https://link.example.com/`ï¼Œå…¶æ˜¾ç¤ºä¸º `https://link.example.com:8888/test`ã€‚
